Issue 1: Accelerator Slider Logic is Incorrect
User Context: The "Accelerator" slider is not functioning as intended. The middle point should represent the current budget (no change). Sliding left (reducing the budget) should result in a longer payoff time and show "Est. Added" interest, relative to the original plan. Sliding right (increasing the budget) should shorten the payoff time and show "Est. Saved."

Video Analysis: The video clearly shows the bug. When the user slides left to "- £25.00," the UI incorrectly displays "Est. Saved: £1,412.35." This figure appears to be the new total interest of the plan, not the added interest cost relative to the original plan.

Technical Root Cause: This is a stale build/deployment issue. The code in the repository for client/src/pages/plan-overview.tsx (lines 405-416) is already correct. It contains the exact logic required:

It correctly calculates the difference in interest (Math.abs(summary.totalInterest - heuristicInterest)).

It correctly switches the label between "Est. Saved: " and "Est. Added: " based on whether the new interest is higher or lower than the original.

The behavior shown in the video proves that the Replit preview environment is serving a stale, older version of the frontend code which contains this bug. The code itself is fixed, but the deployment is not.

Issue 2: "Reset to Original Budget" Button is Not Functional
User Context: The "Reset to Original Budget" button does not work when pressed. It should reset the slider and all associated calculations (payoff time, estimated savings) back to the original plan's baseline (±0).

Technical Root Cause: The onClick handler for this button (line 452 in client/src/pages/plan-overview.tsx) is implemented with a large, complex, and redundant async function (lines 453-498). This function manually attempts to patch the budget, rebuild the entire plan request object, call the generate endpoint, and then invalidate all queries. This code is fragile and unnecessary.

The page already has a robust, tested useMutation hook named reOptimizeMutation (defined at line 120) that performs this exact action correctly. The "Update Plan" button (line 439) uses this mutation, which is why it works. The "Reset" button is broken because it tries to reinvent the wheel instead of using the correct, existing function.

Technical Instructions for Replit
Please implement the following two tasks to resolve these bugs.

Task 1: Force Rebuild of Frontend (Fixes Slider)
The code for this fix is already in the repository. You must force the deployment to update.

Action: Trigger a complete, cache-cleared rebuild and redeployment of the Vite frontend application.

Verify: After deployment, ensure the code block in client/src/pages/plan-overview.tsx from lines 405-416 is active. It should be this:

TypeScript

<div className="flex justify-between items-center pt-2">
  {/* ... other code ... */}
  <div className="text-sm">
    <span className="text-muted-foreground">
      {/* This is the correct logic */}
      {heuristicInterest <= summary.totalInterest ? 'Est. Saved: ' : 'Est. Added: '}
    </span>
    <span 
      className={`font-semibold ${heuristicInterest <= summary.totalInterest ? 'text-green-500' : 'text-orange-500'}`}
      data-testid="text-heuristic-savings"
    >
      {/* This is the correct calculation */}
      {formatCurrency(Math.abs(summary.totalInterest - heuristicInterest), user?.currency)}
    </span>
  </div>
</div>
Task 2: Refactor "Reset" Button Logic (Fixes Button)
You must replace the broken onClick handler with a simple call to the existing reOptimizeMutation.

File to Edit: client/src/pages/plan-overview.tsx

Action: Replace the entire <Button> component for the "Reset to Original Budget" (lines 452-499).

REPLACE THIS (Lines 452-499):

TypeScript

<Button 
  variant="outline"
  onClick={async () => {
    if (!originalBudget || !budget) return;

    // Reset to original budget
    await apiRequest("PATCH", "/api/budget", {
      monthlyBudgetCents: originalBudget,
    });

    // Re-generate plan with original budget
    const planRequest = {
      accounts: accounts.map((acc: any) => ({
        lenderName: acc.lenderName,
        accountType: acc.accountType,
        currentBalanceCents: acc.currentBalanceCents,
        aprStandardBps: acc.aprStandardBps,
        paymentDueDay: acc.paymentDueDay,
        minPaymentRuleFixedCents: acc.minPaymentRuleFixedCents,
        minPaymentRulePercentageBps: acc.minPaymentRulePercentageBps,
        minPaymentRuleIncludesInterest: acc.minPaymentRuleIncludesInterest,
        promoEndDate: acc.promoEndDate,
        promoDurationMonths: acc.promoDurationMonths,
        accountOpenDate: acc.accountOpenDate,
        notes: acc.notes,
      })),
      budget: {
        monthlyBudgetCents: originalBudget,
        futureChanges: budget.futureChanges || [],
        lumpSumPayments: budget.lumpSumPayments || [],
      },
      preferences: {
        strategy: preferences?.strategy || "minimize_interest",
        paymentShape: preferences?.paymentShape || "standard",
      },
      planStartDate: new Date().toISOString().split('T')[0],
    };

    await apiRequest("POST", "/api/plans/generate", planRequest);

    queryClient.invalidateQueries({ queryKey: ["/api/plans/latest"] });
    queryClient.invalidateQueries({ queryKey: ["/api/budget"] });
    refetch();

    toast({
      title: "Budget reset!",
      description: "Your plan has been restored to the original budget.",
    });
  }}
  disabled={reOptimizeMutation.isPending || !originalBudget || budget?.monthlyBudgetCents === originalBudget}
  data-testid="button-reset-budget"
>
  Reset to Original Budget
</Button>
WITH THIS (The Correct Code):

TypeScript

<Button 
  variant="outline"
  onClick={() => {
    if (!originalBudget) return;
    // Use the existing, correct mutation to reset the plan
    reOptimizeMutation.mutate(originalBudget);
  }}
  disabled={reOptimizeMutation.isPending || !originalBudget || budget?.monthlyBudgetCents === originalBudget}
  data-testid="button-reset-budget"
>
  Reset to Original Budget
</Button>